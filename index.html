<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Original Mixer</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Handlebars -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
</head>
<body>
    <script>
        var NEED_AUTH = 'no_token';

        function getAuthCookie() {
            // token=very_long_string
            // token_type=Bearer
            var components = document.cookie.split(';');

            var cookie = [];
            components.forEach(function(component) {
                component = component.trim();
                // token
                // very_long_string
                var parts = component.split('=');
                cookie[parts[0]] = parts[1];
            });

            if (typeof(cookie['access_token']) !== 'undefined') {
                return cookie['access_token'];
            }
            return NEED_AUTH;
        }

        if (getAuthCookie() === NEED_AUTH) {
            window.location.href = 'login.html';
        }
    </script>
    <script src="thirdparty/q.js"></script>
    <script src="thirdparty/spotify-web-api.js"></script>

    <div class="row">
        <div class="col-md-12 col-lg-12 col-xl-12" id="radio"></div>
        <!--<div class="col-md-4 col-lg-4 col-xl-4" id="non-radio"></div>-->
    </div>

    <script id="radio-list-template" type="text/x-handlebars-template">
        {{#list tracks}}
        <div class="row" id="track-{{id}}">
            <div class="col-md-4 col-lg-4 col-xl-4">{{name}}</div>
            <div class="col-md-4 col-lg-4 col-xl-4">{{mixSuffix}}</div>
            <div class="col-md-4 col-lg-4 col-xl-4 extended-link">
                <a href="{{#track-url uri}}{{/track-url}}">Radio Version</a>
            </div>
        </div>
        {{/list}}
    </script>

    <!--
    <script id="non-radio-list-template" type="text/x-handlebars-template">
        {{#list tracks}}
        <div>{{name}}</div>
        {{/list}}
    </script>
    -->

    <script src="mixer.js"></script>
</body>
</html>